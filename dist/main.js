!function(){"use strict";const e={unit:"imperial"};function t(e){var t=new Date(1e3*e),n=t.getHours(),a="0".concat(t.getMinutes());return"".concat(n,":").concat(a.substr(-2))}var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function a(a){fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(a,"&APPID=e6ea60ae42c4f7ea5dbffec273b1f3a0&units=").concat(e.unit),{mode:"cors"}).then((function(e){return e.json()})).then((function(r){var o,c;void 0!==r.main&&(function(e){var t=document.getElementById("current-location"),n=document.getElementById("current-temperature"),a=document.getElementById("current-high"),r=document.getElementById("current-low"),o=document.getElementById("current-weather-icon");t.innerHTML="".concat(e.name,", ").concat(e.sys.country),n.innerHTML="".concat(Math.round(e.main.temp),"°"),a.innerHTML="".concat(Math.round(e.main.temp_max),"°"),r.innerHTML=" ".concat(Math.round(e.main.temp_min),"°"),o.src="http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png")}(r),function(e){var t;document.getElementById("summary").innerHTML="".concat((t=e.weather[0].description,"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)),". The high is ").concat(Math.round(e.main.temp_max),"° and the low is ").concat(Math.round(e.main.temp_min),"°.")}(r),function(e){var n=document.getElementById("feels-like"),a=document.getElementById("rain-chance"),r=document.getElementById("sunrise-time"),o=document.getElementById("sunset-time"),c=document.getElementById("wind"),i=document.getElementById("humidity"),u=document.getElementById("pressure"),m=document.getElementById("visibility");n.innerHTML="".concat(Math.round(e.main.feels_like),"°"),void 0!==e.rain?a.innerHTML="".concat(100*e.rain["1h"],"%"):a.innerHTML="0%",r.innerHTML=t(e.sys.sunrise+e.timezone),o.innerHTML=t(e.sys.sunset+e.timezone),c.innerHTML="".concat(Math.round(e.wind.speed)," mph"),i.innerHTML="".concat(e.main.humidity,"%"),u.innerHTML="".concat(e.main.pressure," hPa"),1e4===parseInt(e.visibility,10)?m.innerHTML="6+ mi":m.innerHTML="".concat(Math.round(.0006213712*e.visibility)," mi")}(r),o=r.coord.lat,c=r.coord.lon,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(o,"&lon=").concat(c,"&exclude=minutely,alerts&units=").concat(e.unit,"&appid=e6ea60ae42c4f7ea5dbffec273b1f3a0"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){!function(e){for(var t=document.getElementsByClassName("hourly-headline"),n=e,a=0;a<12;a++){var r=new Date(1e3*(n+=3600)).getHours();t[a].innerHTML="".concat(r,":00")}}(e.current.dt+e.timezone_offset),function(e){for(var t=document.getElementsByClassName("hourly-weather-icon"),n=document.getElementsByClassName("hourly-temperature"),a=0;a<12;a++)t[a].src="http://openweathermap.org/img/wn/".concat(e.hourly[a].weather[0].icon,"@2x.png"),n[a].innerHTML="".concat(Math.round(e.hourly[a].temp),"°")}(e),function(e){for(var t=document.getElementsByClassName("day"),a=e,r=0;r<7;r++){var o=new Date(1e3*(a+=86400)),c=n[o.getDay()];t[r].innerHTML=c}}(e.current.dt+e.timezone_offset),function(e){for(var t=document.getElementsByClassName("week-weather-icon"),n=document.getElementsByClassName("day-temperature"),a=1;a<8;a++)t[a-1].src="http://openweathermap.org/img/wn/".concat(e.daily[a].weather[0].icon,"@2x.png"),n[a-1].innerHTML="".concat(Math.round(e.daily[a].temp.max),"°")}(e)})).catch((function(e){console.log(e)})),localStorage.setItem("location",a))})).catch((function(e){console.log(e)}))}function r(e,t,n,a,r,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var c=e.apply(t,n);function i(e){r(c,a,o,i,u,"next",e)}function u(e){r(c,a,o,i,u,"throw",e)}i(void 0)}))}}function c(){return(c=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(document.getElementById("searchbar").value),document.getElementById("searchbar").value="";case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var i=localStorage.getItem("location");(function(e){var t;try{t=window.localStorage;var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}})()&&localStorage.getItem("location")?a(i):a("Reykjavík"),document.getElementById("search").addEventListener("submit",(function(e){e.preventDefault()}));var u=document.getElementById("current-unit"),m=document.getElementById("temperature-unit-switch");u.innerHTML="".concat(e.unit,"."),m.addEventListener("click",(function(){var t=document.getElementById("current-location").innerHTML;"imperial"===e.unit?e.unit="metric":e.unit="imperial",a(t),document.getElementById("current-unit").innerHTML="".concat(e.unit,".")})),document.getElementById("search-button").addEventListener("click",(function(){return c.apply(this,arguments)}))}();